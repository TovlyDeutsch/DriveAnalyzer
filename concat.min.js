function checkAuth(){gapi.auth.authorize({client_id:CLIENT_ID,scope:SCOPES.join(" "),immediate:!0},handleAuthResult)}function handleAuthResult(e){var t=document.getElementById("authorize-div");e&&!e.error?(t.style.display="none",$(".none").removeClass("none"),loadDriveApi()):(t.style.display="block",$(".mdl-layout__tab-bar-container").addClass("none"))}function handleAuthClick(e){return gapi.auth.authorize({client_id:CLIENT_ID,scope:SCOPES,immediate:!1},handleAuthResult),!1}function loadDriveApi(){gapi.client.load("drive","v3",getFiles)}var CLIENT_ID="363872304328-t3h8sa4icpbaj9lkrpraf5ujoidtsc6h.apps.googleusercontent.com",SCOPES=["https://www.googleapis.com/auth/drive"];
function getFiles(e){parameters={pageSize:1e3,fields:"nextPageToken, files(    id, name, createdTime, fileExtension, quotaBytesUsed, owners, ownedByMe, webViewLink)",q:"mimeType != 'application/vnd.google-apps.folder' and trashed = false",orderBy:"createdTime"},e&&(parameters.pageToken=e);var i=gapi.client.drive.files.list(parameters);i.then(function(e){files=files.concat(e.result.files),e.result.nextPageToken?getFiles(e.result.nextPageToken):(fileLists=fileCount(files),displayGraph(files),listFiles(fileLists[0]))},function(e){document.getElementById("file-count").innerHTML=JSON.parse(e.body).error.message})}files=[];
function listFiles(e){console.log(e[0]);for(var t='<table id="file-list" class="mdl-data-table mdl-js-data-table mdl-data-table--selectable mdl-shadow--2dp">  <thead>  <tr>  <th class="mdl-data-table__cell--non-numeric">File Name</th>  <th class="narrow">Quota Used</th>  <th class="narrow">Date Created</th>  </tr>  </thead>  <tbody>',a=0;a<e.length;a++)e[a].ownedByMe===!0&&(t+="      <tr data-link="+e[a].webViewLink+" data-id="+e[a].id+'>      <td class="mdl-data-table__cell--non-numeric">'+e[a].name+'</td>      <td class="narrow">'+e[a].quotaBytesUsed+'</td>      <td class="narrow">'+new Date(Date.parse(e[a].createdTime)).toDateString()+"</td>      </tr>");t+="</tbody></table>",document.getElementById("table-slot").innerHTML=t,bindEventHandlers()}function bindEventHandlers(){$("#file-list tbody").on("click","tr",function(){$(this).toggleClass("selected")}),$("#file-list tbody").on("dblclick","tr",function(){console.log("test"),window.open($(this).attr("data-link"),"_blank")}),$("#delete-button").on("click",function(){trashFiles()})}var trashFiles=function e(t){if($("#delete-loader").css("display","inline-block"),void 0===t){var a=!0,s=$(".selected"),l=s.map(function(e,t){return $(t).prop("outerHTML")}).get().join();console.log(l),sessionStorage.setItem("selected",l);var n="Error: ",o="Try Again"}else{var a=!1,s=t;console.log(s);var n="Done",o=""}for(var r=gapi.client.newBatch(),d=0;d<s.length;d++)r.add(gapi.client.drive.files.update({fileId:s[d].getAttribute("data-id"),trashed:a}));var i=document.getElementById("snackbar"),c={message:n,timeout:2e3,actionHandler:e,actionText:o},m=!1;r.then(function(e){var t=e.result;console.log(t);for(var s in t)console.log(t[s].status),200!==t[s].status&&(c.message+=t[s].result.error.message+", ",m=!0);m===!1&&(c.message="Success",c.actionText="Undo",c.actionHandler=Undo),i.MaterialSnackbar.showSnackbar(c),a===!0?$(".selected").addClass("trash"):$(".trash").removeClass("trash"),$(".selected").removeClass("selected"),$(".loader").remove()},function(e){console.log(JSON.parse(e.body).error.message)})},Undo=function(){var e=sessionStorage.getItem("selected");trashFiles($("<div/>").html(e).contents())};
function fileCount(e){var t=[],a=e.filter(function(e){return e.ownedByMe===!0||void t.push(e)});return document.getElementById("file-counts").innerHTML='<p id="file-count" class="mdl-typography--headline">  Files You Own: '+a.length+'</p>  <p id="file-count" class="mdl-typography--headline">  Files Shared With You: '+t.length+'</p>  <p id="file-count" class="mdl-typography--headline">  Total: '+e.length+"</p>",[a,t]}function displayGraph(e){function t(){var e=google.visualization.arrayToDataTable([["Task","Hours per Day"],["Work",11],["Eat",2],["Commute",2],["Watch TV",2],["Sleep",7]]),t={title:"Distribution of file types"},a=new google.visualization.PieChart(document.getElementById("piechart"));a.draw(e,t),$("#graph-loader").remove()}for(var a=[],o=0;o<e.length;o++)a.push(e[o].fileExtension);google.charts.load("current",{packages:["corechart"]}),google.charts.setOnLoadCallback(t)}